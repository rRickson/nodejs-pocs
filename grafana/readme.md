

# Grafana + Loki + Prometheus + Promtail Integration

This project demonstrates the integration of Grafana, Loki, Prometheus, and Promtail to collect, monitor, and visualize metrics and logs from a Node.js application. It utilizes the `prom-client` library for custom metrics and `winston` for logging.

## Features

- **Custom Metrics Collection**: Leverages `prom-client` to gather application-specific metrics.
- **Centralized Logging**: Uses `winston` to manage logs, which are then collected by Promtail and stored in Loki.
- **Data Visualization**: Implements Grafana dashboards to display metrics and logs in a user-friendly manner.
- **Optimized Log Ingestion**: Configured to prevent constant requests to Loki, ensuring efficient log processing.

## Prerequisites

Ensure you have the following installed:

- [Node.js](https://nodejs.org/) (for the application)
- [Docker](https://www.docker.com/) and [Docker Compose](https://docs.docker.com/compose/) (for container orchestration)

## Setup and Running the Application

1. **Install Dependencies**: Navigate to the `node-app` directory and install the necessary Node.js packages.

   ```bash
   cd node-app
   yarn install
   ```

2. **Start the Services**: Use Docker Compose to build and run the services in detached mode.

   ```bash
   docker compose up --build -d
   ```

   This command will initiate the Node.js application along with Grafana, Loki, Prometheus, and Promtail services.

## Configuration Details

- **Prometheus**: Configured to scrape metrics from the Node.js application.
- **Loki & Promtail**: Set up to collect and store logs generated by the application.
- **Grafana**: Pre-configured dashboards to visualize collected metrics and logs.

## Upcoming Enhancements

- **Node Exporter Integration**: Plan to incorporate `node-exporter` with Prometheus to monitor system-level metrics, providing a comprehensive view of machine resource utilization.

## References

- [Grafana](https://grafana.com/)
- [Loki](https://grafana.com/oss/loki/)
- [Prometheus](https://prometheus.io/)
- [Promtail](https://grafana.com/docs/loki/latest/clients/promtail/)
- [prom-client](https://github.com/siimon/prom-client)
- [winston](https://github.com/winstonjs/winston)

---